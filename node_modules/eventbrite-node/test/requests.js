var config = require('./config');
var responses = {};

module.exports = responses;

nock('https://www.eventbrite.com')
  .post('/oauth/token', {
    code: config.code,
    client_secret: config.clientSecret,
    client_id: config.clientKey,
    grant_type: 'authorization_code'
  })
  .reply(200, JSON.stringify({ access_token: config.accessToken }));


responses['/v3/users/me'] = {
  "emails": [
    {
      "email": "mitch@eventbrite.com",
      "verified": true,
      "primary": true
    }
  ],
  "id": "123456789",
  "name": "John Doe",
  "first_name": "John",
  "last_name": "Doe"
};

nock('https://www.eventbrite.com')
  .get('/v3/users/me')
  .reply(200, JSON.stringify(responses['/v3/users/me']));

responses['/v3/users/1/contact_lists'] = { "contact_lists": [
  {
    "resource_uri": "https://www.eventbriteapi.com/v3/users/1/contact_lists/111111",
    "id": "111111",
    "name": "Last Event Attendees",
    "user_id": "1"
  }
]}

nock('https://www.eventbrite.com')
  .get('/v3/users/1/contact_lists', { name: 'Last Event Attendees'})
  .reply(200, JSON.stringify(responses['/v3/users/1/contact_lists/']));